from typing import Any, Dict, List, Mapping, NamedTuple, Optional, Tuple, Type, TypeVar, Union

from botocore.utils import CachedProperty

NOT_SET: object

class NoShapeFoundError(Exception): ...
class InvalidShapeError(Exception): ...
class OperationNotFoundError(Exception): ...
class InvalidShapeReferenceError(Exception): ...

_R = TypeVar("_R")

class ServiceId(str):
    def hyphenize(self) -> str: ...

class Shape:
    SERIALIZED_ATTRS: List[str]
    METADATA_ATTRS: List[str]
    MAP_TYPE: Type[Dict[str, Any]]
    def __init__(
        self,
        shape_name: str,
        shape_model: Mapping[str, Any],
        shape_resolver: Optional["ShapeResolver"] = ...,
    ) -> None:
        self.name: str
        self.type_name: str
        self.documentation: str

    @CachedProperty
    def serialization(self) -> Dict[str, Any]: ...
    @CachedProperty
    def metadata(self) -> Dict[str, Any]: ...
    @CachedProperty
    def required_members(self) -> List[str]: ...
    @CachedProperty
    def event_stream_name(self) -> None: ...

class StructureShape(Shape):
    @CachedProperty
    def members(self) -> Dict[str, Shape]: ...
    @CachedProperty
    def error_code(self) -> str: ...
    @CachedProperty
    def is_document_type(self) -> bool: ...
    @CachedProperty
    def is_tagged_union(self) -> bool: ...

class ListShape(Shape):
    @CachedProperty
    def member(self) -> Shape: ...

class MapShape(Shape):
    @CachedProperty
    def key(self) -> Shape: ...
    @CachedProperty
    def value(self) -> Shape: ...

class StringShape(Shape):
    @CachedProperty
    def enum(self) -> List[str]: ...

class StaticContextParameter(NamedTuple):
    name: str
    value: Union[bool, str]

class ContextParameter(NamedTuple):
    name: str
    member_name: str

class ClientContextParameter(NamedTuple):
    name: str
    type: str
    documentation: str

class ServiceModel:
    def __init__(
        self, service_description: Mapping[str, Any], service_name: Optional[str] = ...
    ) -> None:
        self.metadata: Dict[str, Any]

    def shape_for(
        self, shape_name: str, member_traits: Optional[Mapping[str, Any]] = ...
    ) -> Shape: ...
    def shape_for_error_code(self, error_code: int) -> Shape: ...
    def resolve_shape_ref(self, shape_ref: str) -> Shape: ...
    @CachedProperty
    def shape_names(self) -> List[str]: ...
    @CachedProperty
    def error_shapes(self) -> List[Shape]: ...
    def operation_model(self, operation_name: str) -> "OperationModel": ...
    @CachedProperty
    def documentation(self) -> str: ...
    @CachedProperty
    def operation_names(self) -> List[str]: ...
    @CachedProperty
    def service_name(self) -> str: ...
    @CachedProperty
    def service_id(self) -> ServiceId: ...
    @CachedProperty
    def signing_name(self) -> str: ...
    @CachedProperty
    def api_version(self) -> str: ...
    @CachedProperty
    def protocol(self) -> str: ...
    @CachedProperty
    def endpoint_prefix(self) -> str: ...
    @CachedProperty
    def endpoint_discovery_operation(self) -> "OperationModel": ...
    @CachedProperty
    def endpoint_discovery_required(self) -> bool: ...
    @CachedProperty
    def client_context_parameters(self) -> List[ClientContextParameter]: ...
    @property
    def signature_version(self) -> str: ...
    @signature_version.setter
    def signature_version(self, value: str) -> None: ...

class OperationModel:
    def __init__(
        self,
        operation_model: Mapping[str, Any],
        service_model: ServiceModel,
        name: Optional[str] = None,
    ) -> None:
        self.metadata: Dict[str, Any]
        self.http: Dict[str, Any]

    @CachedProperty
    def name(self) -> str: ...
    @property
    def wire_name(self) -> str: ...
    @property
    def service_model(self) -> ServiceModel: ...
    @CachedProperty
    def documentation(self) -> str: ...
    @CachedProperty
    def deprecated(self) -> bool: ...
    @CachedProperty
    def endpoint_discovery(self) -> Optional["OperationModel"]: ...
    @CachedProperty
    def is_endpoint_discovery_operation(self) -> bool: ...
    @CachedProperty
    def input_shape(self) -> Optional[StructureShape]: ...
    @CachedProperty
    def output_shape(self) -> Optional[StructureShape]: ...
    @CachedProperty
    def idempotent_members(self) -> List[str]: ...
    @CachedProperty
    def static_context_parameters(self) -> List[StaticContextParameter]: ...
    @CachedProperty
    def context_parameters(self) -> List[ContextParameter]: ...
    @CachedProperty
    def request_compression(self) -> Optional[Dict[str, Any]]: ...
    @CachedProperty
    def auth_type(self) -> Optional[str]: ...
    @CachedProperty
    def error_shapes(self) -> List[Shape]: ...
    @CachedProperty
    def endpoint(self) -> Optional[str]: ...
    @CachedProperty
    def http_checksum_required(self) -> bool: ...
    @CachedProperty
    def http_checksum(self) -> Dict[str, Any]: ...
    @CachedProperty
    def has_event_stream_input(self) -> bool: ...
    @CachedProperty
    def has_event_stream_output(self) -> bool: ...
    def get_event_stream_input(self) -> Optional[Shape]: ...
    def get_event_stream_output(self) -> Optional[Shape]: ...
    @CachedProperty
    def has_streaming_input(self) -> bool: ...
    @CachedProperty
    def has_streaming_output(self) -> bool: ...
    def get_streaming_input(self) -> Optional[Shape]: ...
    def get_streaming_output(self) -> Optional[Shape]: ...

class ShapeResolver:
    SHAPE_CLASSES: Dict[str, Shape]
    def __init__(self, shape_map: Mapping[str, Shape]) -> None: ...
    def get_shape_by_name(
        self, shape_name: str, member_traits: Optional[Mapping[str, Any]] = ...
    ) -> Shape: ...
    def resolve_shape_ref(self, shape_ref: Mapping[str, Any]) -> Shape: ...

class UnresolvableShapeMap:
    def get_shape_by_name(
        self, shape_name: str, member_traits: Optional[Mapping[str, Any]] = ...
    ) -> Shape: ...
    def resolve_shape_ref(self, shape_ref: Mapping[str, Any]) -> Shape: ...

class DenormalizedStructureBuilder:
    SCALAR_TYPES: Tuple[str, ...]

    def __init__(self, name: Optional[str] = ...) -> None:
        self.name: str
        self.members: Dict[str, Any]

    def with_members(self: _R, members: Mapping[str, Any]) -> _R: ...
    def build_model(self) -> StructureShape: ...

class ShapeNameGenerator:
    def __init__(self) -> None: ...
    def new_shape_name(self, type_name: str) -> str: ...
